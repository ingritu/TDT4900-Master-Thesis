\hypertarget{namespacetext__to__csv}{}\doxysection{text\+\_\+to\+\_\+csv Namespace Reference}
\label{namespacetext__to__csv}\index{text\_to\_csv@{text\_to\_csv}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacetext__to__csv_a059770497a372fc9e89fb6e50a1ca98a}{text\+\_\+to\+\_\+csv}} (file\+\_\+path, save\+\_\+path)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacetext__to__csv_ab4701f87370562b4211d1994681e2b4c}{R\+O\+O\+T\+\_\+\+P\+A\+TH}} = Path(\+\_\+\+\_\+file\+\_\+\+\_\+).absolute().parents\mbox{[}2\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacetext__to__csv_a059770497a372fc9e89fb6e50a1ca98a}\label{namespacetext__to__csv_a059770497a372fc9e89fb6e50a1ca98a}} 
\index{text\_to\_csv@{text\_to\_csv}!text\_to\_csv@{text\_to\_csv}}
\index{text\_to\_csv@{text\_to\_csv}!text\_to\_csv@{text\_to\_csv}}
\doxysubsubsection{\texorpdfstring{text\_to\_csv()}{text\_to\_csv()}}
{\footnotesize\ttfamily def text\+\_\+to\+\_\+csv.\+text\+\_\+to\+\_\+csv (\begin{DoxyParamCaption}\item[{}]{file\+\_\+path,  }\item[{}]{save\+\_\+path }\end{DoxyParamCaption})}

\begin{DoxyVerb}convert info from txt fil to csv. .csv file should be saved in
data/interim folder.
\end{DoxyVerb}
 

Definition at line 17 of file text\+\_\+to\+\_\+csv.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{17 \textcolor{keyword}{def }\mbox{\hyperlink{namespacetext__to__csv_a059770497a372fc9e89fb6e50a1ca98a}{text\_to\_csv}}(file\_path, save\_path):}
\DoxyCodeLine{18     \textcolor{stringliteral}{"""}}
\DoxyCodeLine{19 \textcolor{stringliteral}{    convert info from txt fil to csv. .csv file should be saved in}}
\DoxyCodeLine{20 \textcolor{stringliteral}{    data/interim folder.}}
\DoxyCodeLine{21 \textcolor{stringliteral}{    """}}
\DoxyCodeLine{22     file\_path = Path(file\_path)}
\DoxyCodeLine{23     save\_path = Path(save\_path)}
\DoxyCodeLine{24 }
\DoxyCodeLine{25     \textcolor{comment}{\# set up caption dictionary}}
\DoxyCodeLine{26     captions = \{\}}
\DoxyCodeLine{27     labels = [\textcolor{stringliteral}{'image\_id'}, \textcolor{stringliteral}{'image\_name'}, \textcolor{stringliteral}{'caption\_id'}, \textcolor{stringliteral}{'caption'}]}
\DoxyCodeLine{28     \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} labels:}
\DoxyCodeLine{29         captions[l] = []}
\DoxyCodeLine{30 }
\DoxyCodeLine{31     image\_name2ids = \{\}}
\DoxyCodeLine{32     counter = 0}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{comment}{\# read txt file an extract info}}
\DoxyCodeLine{35     \textcolor{keyword}{with} open(file\_path, \textcolor{stringliteral}{'r'}) \textcolor{keyword}{as} file:}
\DoxyCodeLine{36         doc = file.read()}
\DoxyCodeLine{37     \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} doc.split(\textcolor{stringliteral}{'\(\backslash\)n'}):}
\DoxyCodeLine{38         \textcolor{comment}{\# split line by white space}}
\DoxyCodeLine{39         tokens = line.split()}
\DoxyCodeLine{40         \textcolor{keywordflow}{if} len(tokens) == 0:}
\DoxyCodeLine{41             \textcolor{keywordflow}{continue}}
\DoxyCodeLine{42         \textcolor{comment}{\# take the first token as image id, the rest as description}}
\DoxyCodeLine{43         caption\_id, caption\_tokens = tokens[0], tokens[1:]}
\DoxyCodeLine{44 }
\DoxyCodeLine{45         \textcolor{comment}{\# extract .jpg filename from image id}}
\DoxyCodeLine{46         image\_name = caption\_id.split(\textcolor{stringliteral}{'\#'})[0]}
\DoxyCodeLine{47 }
\DoxyCodeLine{48         \textcolor{keywordflow}{if} image\_name \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} image\_name2ids:}
\DoxyCodeLine{49             image\_name2ids[image\_name] = counter}
\DoxyCodeLine{50             counter += 1}
\DoxyCodeLine{51 }
\DoxyCodeLine{52         \textcolor{comment}{\# convert description tokens back to string}}
\DoxyCodeLine{53         caption = \textcolor{stringliteral}{' '}.join(caption\_tokens)}
\DoxyCodeLine{54 }
\DoxyCodeLine{55         \textcolor{comment}{\# add all info to the caption dictionary}}
\DoxyCodeLine{56         captions[\textcolor{stringliteral}{'image\_id'}].append(image\_name2ids[image\_name])}
\DoxyCodeLine{57         captions[\textcolor{stringliteral}{'image\_name'}].append(image\_name)}
\DoxyCodeLine{58         captions[\textcolor{stringliteral}{'caption\_id'}].append(caption\_id)}
\DoxyCodeLine{59         captions[\textcolor{stringliteral}{'caption'}].append(caption)}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     parent = save\_path.parent}
\DoxyCodeLine{62     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} parent.is\_dir():}
\DoxyCodeLine{63         \textcolor{comment}{\# if the directory of the save path is not a directory}}
\DoxyCodeLine{64         \textcolor{comment}{\# then make it a directory along with any of its parents}}
\DoxyCodeLine{65         parent.mkdir(parents=\textcolor{keyword}{True})}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{comment}{\# convert dict to DataFrame}}
\DoxyCodeLine{68     cap\_df = pd.DataFrame(data=captions, columns=labels)}
\DoxyCodeLine{69     cap\_df.to\_csv(save\_path)}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacetext__to__csv_ab4701f87370562b4211d1994681e2b4c}\label{namespacetext__to__csv_ab4701f87370562b4211d1994681e2b4c}} 
\index{text\_to\_csv@{text\_to\_csv}!ROOT\_PATH@{ROOT\_PATH}}
\index{ROOT\_PATH@{ROOT\_PATH}!text\_to\_csv@{text\_to\_csv}}
\doxysubsubsection{\texorpdfstring{ROOT\_PATH}{ROOT\_PATH}}
{\footnotesize\ttfamily text\+\_\+to\+\_\+csv.\+R\+O\+O\+T\+\_\+\+P\+A\+TH = Path(\+\_\+\+\_\+file\+\_\+\+\_\+).absolute().parents\mbox{[}2\mbox{]}}



Definition at line 5 of file text\+\_\+to\+\_\+csv.\+py.

